<section>
  <div class="container-fluid p-0">
    <div class="row">
      <div class="col-md-12 col-sm-12">
        <div id="accordion6" class="mb-3">
          <div class="card">
            <div class="card-header">
              <a class="card-link" data-toggle="collapse" href="#collapseSix">
                Summary Sales
              </a>
            </div>
            <div
              id="collapseSix"
              class="collapse show"
              data-parent="#accordion6"
            ></div>
          </div>
        </div>

        <div id="accordion7" class="mb-3">
          <div class="card">
            <div class="card-header">
              <a class="card-link" data-toggle="collapse" href="#collapseSeven">
                <span class="fa fas fa-list-ul pr-2"></span>

                Order Details
              </a>
            </div>
            <div
              id="collapseSeven"
              class="collapse show"
              data-parent="#accordion7"
            >
              <div class="card-body">
                <div class="table-responsive">
                  <table class="table" *ngIf="loader">
                    <thead>
                      <tr>
                        <td class="loader-td" colspan="8">
                          <div
                            class="ph-item"
                            style="
                              padding: 0px 0px;
                              border: 0px;
                              margin-bottom: 0px;
                            "
                          >
                            <div>
                              <div class="ph-picture"></div>
                            </div>
                          </div>
                        </td>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td class="loader-td">
                          <div
                            class="ph-item"
                            style="
                              padding: 10px 10px;
                              border: 0px;
                              margin-bottom: 0px;
                            "
                          >
                            <div>
                              <div class="ph-row pt-2">
                                <div class="ph-col-12 p-1 rounded"></div>
                                <div class="ph-col-12 p-1 rounded"></div>
                              </div>
                            </div>
                          </div>
                        </td>

                        <td class="loader-td">
                          <div
                            class="ph-item"
                            style="
                              padding: 10px 10px;
                              border: 0px;
                              margin-bottom: 0px;
                            "
                          >
                            <div>
                              <div class="ph-row pt-2">
                                <div class="ph-col-12 p-1 rounded"></div>
                                <div class="ph-col-12 p-1 rounded"></div>
                              </div>
                            </div>
                          </div>
                        </td>
                        <td class="loader-td">
                          <div
                            class="ph-item"
                            style="
                              padding: 10px 10px;
                              border: 0px;
                              margin-bottom: 0px;
                            "
                          >
                            <div>
                              <div class="ph-row pt-2">
                                <div class="ph-col-12 p-1 rounded"></div>
                                <div class="ph-col-12 p-1 rounded"></div>
                              </div>
                            </div>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                  <table
                    *ngIf="tableView"
                    class="table table-striped table-bordered text-nowrap table-wrapper2 summary-table mb-0"
                  >
                    <thead>
                      <tr class="top-table">
                        <td colspan="6">
                          {{ vendorData.vendor_name }}
                          {{ dealerData.company_name }} -
                          {{ dealerData.account_id }}
                        </td>
                      </tr>
                      <tr>
                        <th class="thead-custom">Qty</th>
                        <th class="thead-custom">Atlas #</th>

                        <th class="thead-custom">Vendor #</th>

                        <th class="thead-custom">Description</th>

                        <th class="thead-custom">Specail Price ($)</th>

                        <th class="thead-custom">Total ($)</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let data of summaryData">
                        <td class="text-center">{{ data.qty }}</td>
                        <td class="text-center">{{ data.atlas_id }}</td>
                        <td class="text-center">
                          {{ data.vendor_product_code }}
                        </td>
                        <td class="text-center">{{ data.desc }}</td>

                        <td class="text-right">{{ data.special }}</td>
                        <td class="text-right">{{ data.total }}</td>
                      </tr>
                      <tr class="last-col">
                        <td colspan="5" class="text-right">
                          TOTAL FOR {{ vendorData.vendor_name }}
                          {{ dealerData.company_name }}
                        </td>
                        <td class="text-right">{{ totalPrice }}</td>
                      </tr>
                      <tr *ngIf="noTableData">
                        <td colspan="8" class="text-center">No order listed</td>
                      </tr>
                    </tbody>
                  </table>

                  <div class="grand-section">
                    <div>
                      <h6>GRAND TOTAL</h6>
                    </div>
                    <div>
                      <h6>{{ totalPrice }}</h6>
                    </div>
                  </div>
                </div>

                <div class="table-responsive mb-4">
                  <table class="table" *ngIf="vendorNoteLoader">
                    <thead>
                      <tr>
                        <td class="loader-td" colspan="8">
                          <div
                            class="ph-item"
                            style="
                              padding: 0px 0px;
                              border: 0px;
                              margin-bottom: 0px;
                            "
                          >
                            <div>
                              <div class="ph-picture"></div>
                            </div>
                          </div>
                        </td>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td class="loader-td">
                          <div
                            class="ph-item"
                            style="
                              padding: 10px 10px;
                              border: 0px;
                              margin-bottom: 0px;
                            "
                          >
                            <div>
                              <div class="ph-row pt-2">
                                <div class="ph-col-12 p-1 rounded"></div>
                                <div class="ph-col-12 p-1 rounded"></div>
                              </div>
                            </div>
                          </div>
                        </td>

                        <td class="loader-td">
                          <div
                            class="ph-item"
                            style="
                              padding: 10px 10px;
                              border: 0px;
                              margin-bottom: 0px;
                            "
                          >
                            <div>
                              <div class="ph-row pt-2">
                                <div class="ph-col-12 p-1 rounded"></div>
                                <div class="ph-col-12 p-1 rounded"></div>
                              </div>
                            </div>
                          </div>
                        </td>
                        <td class="loader-td">
                          <div
                            class="ph-item"
                            style="
                              padding: 10px 10px;
                              border: 0px;
                              margin-bottom: 0px;
                            "
                          >
                            <div>
                              <div class="ph-row pt-2">
                                <div class="ph-col-12 p-1 rounded"></div>
                                <div class="ph-col-12 p-1 rounded"></div>
                              </div>
                            </div>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                  <table
                    id="vendor-note-table"
                    *ngIf="!vendorNoteLoader"
                    class="table table-striped table-bordered text-nowrap table-wrapper2 summary-table mb-0"
                  >
                    <thead>
                      <tr class="top-table">
                        <td colspan="6">
                          Vendor Notes
                        </td>
                      </tr>
                      <tr>
                        <th>Description</th>
                        <th>Rep Name</th>
                      </tr>
                    </thead>

                    <tbody>
                      <tr *ngFor="let data of vendorNoteData">
                        <td>{{ data.note }}</td>
                        <td>{{ data.rep_name }}</td>
                      </tr>
                      <tr *ngIf="noVendorNote">
                        <td colspan="2" class="text-center">No vendor note</td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <div class="table-responsive">
                  <table class="table" *ngIf="atlasNoteLoader">
                    <thead>
                      <tr>
                        <td class="loader-td" colspan="8">
                          <div
                            class="ph-item"
                            style="
                              padding: 0px 0px;
                              border: 0px;
                              margin-bottom: 0px;
                            "
                          >
                            <div>
                              <div class="ph-picture"></div>
                            </div>
                          </div>
                        </td>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td class="loader-td">
                          <div
                            class="ph-item"
                            style="
                              padding: 10px 10px;
                              border: 0px;
                              margin-bottom: 0px;
                            "
                          >
                            <div>
                              <div class="ph-row pt-2">
                                <div class="ph-col-12 p-1 rounded"></div>
                                <div class="ph-col-12 p-1 rounded"></div>
                              </div>
                            </div>
                          </div>
                        </td>

                        <td class="loader-td">
                          <div
                            class="ph-item"
                            style="
                              padding: 10px 10px;
                              border: 0px;
                              margin-bottom: 0px;
                            "
                          >
                            <div>
                              <div class="ph-row pt-2">
                                <div class="ph-col-12 p-1 rounded"></div>
                                <div class="ph-col-12 p-1 rounded"></div>
                              </div>
                            </div>
                          </div>
                        </td>
                        <td class="loader-td">
                          <div
                            class="ph-item"
                            style="
                              padding: 10px 10px;
                              border: 0px;
                              margin-bottom: 0px;
                            "
                          >
                            <div>
                              <div class="ph-row pt-2">
                                <div class="ph-col-12 p-1 rounded"></div>
                                <div class="ph-col-12 p-1 rounded"></div>
                              </div>
                            </div>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                  <table
                    id="altas-note-table"
                    *ngIf="!atlasNoteLoader"
                    class="table table-striped table-bordered text-nowrap table-wrapper2 summary-table mb-0"
                  >
                    <thead>
                      <tr class="top-table">
                        <td colspan="6">
                          Atlas Notes
                        </td>
                      </tr>
                      <tr>
                        <th>Description</th>
                        <th>Rep Name</th>
                      </tr>
                    </thead>

                    <tbody>
                      <tr *ngFor="let data of atlasNoteData">
                        <td>{{ data.note }}</td>
                        <td>{{ data.rep_name }}</td>
                      </tr>
                      <tr *ngIf="noAtlasNote">
                        <td colspan="2" class="text-center">No atlas note</td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <hr />
                <div class="d-flex btn-section">
                  <div>
                    <button class="download-btn">
                      <span class="fa fa-print"></span>
                      Print Preview/Print
                    </button>
                  </div>
                  <div>
                    <button class="download-btn" (click)="exportVendorNote()">
                      <span class="fa fa-download"></span>
                      Download as Excel (vendor note)
                    </button>
                  </div>
                  <div>
                    <button class="download-btn" (click)="exportAtlasNote()">
                      <span class="fa fa-download"></span>
                      Download as Excel (atlas note)
                    </button>
                  </div>
                  <div>
                    <button
                      class="download-btn"
                      type="button"
                      data-toggle="modal"
                      data-target="#addVendorModal"
                    >
                      <span class="fa fa-plus"></span>
                      Add Vendor Note
                    </button>
                  </div>
                  <div>
                    <button
                      class="download-btn"
                      type="button"
                      data-toggle="modal"
                      data-target="#addAtlasModal"
                    >
                      <span class="fa fa-plus"></span>
                      Add Atlas Note
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Add vendor Note Modal -->
<div
  class="modal fade"
  id="addVendorModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Add Vendor Note</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
          #closeVendorNoteModal
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div>
          <textarea
            name=""
            id=""
            class="vendor-note-text"
            [(ngModel)]="vendorNoteText"
            placeholder="Add Vendor note here....."
          ></textarea>
        </div>

        <div class="btn-section" *ngIf="vendorDataLoader">
          <button (click)="saveVendorNote()">
            <span *ngIf="!vendorAddLoader">Add Vendor Note</span>
            <div *ngIf="vendorAddLoader">
              <span class="spinner-border spinner-border-sm"></span>
            </div>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Add Atlas Note Modal -->
<div
  class="modal fade"
  id="addAtlasModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Add Atlas Note</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
          #closeAtlasNoteModal
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div>
          <textarea
            name=""
            id=""
            class="vendor-note-text"
            [(ngModel)]="atlasNoteText"
            placeholder="Add Atlas note here....."
          ></textarea>
        </div>

        <div class="btn-section" *ngIf="atlasDataLoader">
          <button (click)="saveAtlasNote()">
            <span *ngIf="!atlasAddLoader">Add Atlas Note</span>
            <div *ngIf="atlasAddLoader">
              <span class="spinner-border spinner-border-sm"></span>
            </div>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
